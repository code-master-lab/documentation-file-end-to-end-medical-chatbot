
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Medical Chatbot ‚Äî Full Engineering Documentation</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="style.css" />
</head>

<body>

<div class="container">

<h1>üìò COMPLETE ENGINEERING DOCUMENTATION<br>
End-to-End Medical Chatbot (RAG System)</h1>

<p class="subtitle">
A complete engineering-level breakdown of how the project evolved, what failed, what was rebuilt, and why the final system is production-ready.
</p>

<hr><br>

<!-- SECTION 0 -->
<h2>SECTION 0 ‚Äî WHY THIS DOCUMENT EXISTS</h2>
<div class="important box">
    <p>This document exists because your project is NOT a copy of a YouTube tutorial.  
    You faced:</p>
    <ul>
        <li>Breaking library changes</li>
        <li>Deployment crashes</li>
        <li>Memory limits on Render</li>
        <li>API mismatches</li>
        <li>Embedding dimension conflicts</li>
    </ul>
    <p>You solved real engineering problems ‚Äî this document captures that journey.</p>
</div>

<!-- SECTION 1 -->
<h2>SECTION 1 ‚Äî WHAT THE VIDEO PROJECT PROMISED</h2>
<div class="info box">
    <p>The YouTube project looked simple:</p>
    <ul>
        <li>Upload PDF ‚Üí Create embeddings ‚Üí Store in Pinecone ‚Üí Ask questions</li>
    </ul>
    <p>But the video was recorded on outdated libraries.</p>
</div>

<div class="danger box">
    <p>Hidden truth:</p>
    <ul>
        <li>LangChain API changed dramatically</li>
        <li>Pinecone SDK changed completely</li>
        <li>Embeddings now require different dimensions</li>
        <li>Render free tier cannot run heavy models</li>
    </ul>
</div>

<!-- SECTION 2 -->
<h2>SECTION 2 ‚Äî THE FIRST REALITY CHECK</h2>

<h3>2.1 LangChain Breaking Changes</h3>
<div class="danger box">
    <p>The video used deprecated functions like:</p>
    <ul>
        <li>retriever.get_relevant_documents()</li>
        <li>create_retrieval_chain()</li>
        <li>StuffDocumentsChain</li>
    </ul>
    <p>These no longer exist in LangChain v0.2+</p>
</div>

<div class="lesson">üìå Lesson: Never trust old LangChain examples without checking the version.</div>

<h3>2.2 Pinecone Changes (Very Big)</h3>
<div class="important box">
    <p>You encountered errors like:</p>
    <pre class="code-box">Vector dimension 384 does not match index dimension 768</pre>
    <p>This is because the new Pinecone SDK requires correct dimension matching.</p>
</div>

<div class="lesson">üìå Lesson: Vector databases follow strict mathematical rules ‚Äî dimensions must match exactly.</div>

<!-- SECTION 3 -->
<h2>SECTION 3 ‚Äî EMBEDDINGS: THE MOST IMPORTANT PART</h2>

<h3>3.1 Why the Video Embeddings Failed</h3>
<div class="danger box">
    <p>The video used:</p>
    <pre class="code-box">HuggingFaceEmbeddings("all-MiniLM-L6-v2")</pre>

    <p>This requires:</p>
    <ul>
        <li>PyTorch</li>
        <li>RAM</li>
        <li>CPU/GPU</li>
        <li>torch + onnxruntime</li>
    </ul>

    <p>On Render free tier ‚Üí it crashes instantly.</p>
</div>

<h3>3.2 Your Critical Insight</h3>
<div class="success box">
    <p><b>‚ÄúEmbeddings don‚Äôt need to run locally ‚Äî we can call an API.‚Äù</b></p>
</div>

<h3>3.3 Your HF API Embedding Solution</h3>
<div class="info box">
    <p>You built a custom class:</p>
    <pre class="code-box">
class HFCustomEmbedder:
    def embed_query(self, text):
        return requests.post(HF_API)
    </pre>

    <p>This removed:</p>
    <ul>
        <li>torch loading</li>
        <li>RAM spikes</li>
        <li>deployment crashes</li>
    </ul>
</div>

<div class="lesson">üìå Lesson: In production, lightweight API solutions are more stable than running heavy models locally.</div>

<!-- SECTION 4 -->
<h2>SECTION 4 ‚Äî NOTEBOOK vs PRODUCTION</h2>

<div class="info box">
<h3>Why Notebook Worked</h3>
<ul>
    <li>You had RAM</li>
    <li>You had torch installed</li>
    <li>Long execution time was allowed</li>
</ul>

<h3>Why Production Failed</h3>
<ul>
    <li>Low RAM</li>
    <li>No GPU</li>
    <li>Short startup time</li>
</ul>
</div>

<div class="lesson">üìå Lesson: Notebook success ‚â† Deployment success</div>

<!-- SECTION 5 -->
<h2>SECTION 5 ‚Äî RAG PIPELINE EVOLUTION</h2>

<div class="info box">
<pre class="code-box">
docs = retriever.invoke(query)
context = "\n\n".join(doc.page_content for doc in docs)
response = chain.invoke({"context": context, "input": query})
</pre>
<p>Clean, debuggable, modern.</p>
</div>

<!-- SECTION 6 -->
<h2>SECTION 6 ‚Äî FRONTEND vs BACKEND CONFUSION</h2>

<div class="important box">
<p><b>Frontend loads even if backend fails.</b></p>
</div>

<div class="lesson">üìå Lesson: ALWAYS check backend logs.</div>

<!-- SECTION 7 -->
<h2>SECTION 7 ‚Äî WHY 3 API KEYS ARE REQUIRED</h2>

<div class="info box">
<ul>
    <li><b>PINECONE_API_KEY</b> ‚Üí vector search</li>
    <li><b>GROQ_API_KEY</b> ‚Üí LLM reasoning</li>
    <li><b>HF_TOKEN</b> ‚Üí embeddings</li>
</ul>
</div>

<!-- SECTION 8 -->
<h2>SECTION 8 ‚Äî DIMENSION MISMATCH EXPLAINED</h2>

<div class="danger box">
<p>Choose embedding model FIRST ‚Üí create index AFTER.</p>
</div>

<!-- SECTION 9 -->
<h2>SECTION 9 ‚Äî WHY OPTION B FAILED</h2>
<div class="danger box">
<pre class="code-box">model_not_found</pre>
</div>

<!-- SECTION 10 -->
<h2>SECTION 10 ‚Äî FINAL SYSTEM MENTAL MODEL</h2>

<div class="info box">
<pre class="code-box">
PDFs ‚Üí chunks ‚Üí embeddings ‚Üí Pinecone
User ‚Üí question ‚Üí embedding ‚Üí search ‚Üí context ‚Üí Groq ‚Üí answer
</pre>
</div>

<!-- SECTION 11 -->
<h2>SECTION 11 ‚Äî HOW TO ADD NEW DATA</h2>

<div class="success box">
<ol>
    <li>Add PDFs to /Data</li>
    <li>Run embedding notebook</li>
    <li>Upsert into Pinecone</li>
    <li>Redeploy backend</li>
</ol>
</div>

<!-- SECTION 12 -->
<h2>SECTION 12 ‚Äî WHY YOUR PROJECT IS BETTER</h2>

<div class="important box">
<p>You built a REAL production-grade RAG system.</p>
</div>

</div>
</body>
</html>
